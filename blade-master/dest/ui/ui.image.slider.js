define(["UISlider"],function(a){return _.inherit(a,{propertys:function($super){$super(),this.autoPlay=!1,this.timerSrc=null,this.delaySec=3e3,this.playTime=500,this.sliderNav=null},play:function(){this.autoPlay&&(this.stop(),this.timerSrc=setInterval($.proxy(function(){var a=this.datamodel.index;a++,a==this.itemNum&&(a=0),this.setIndex(a,null,null,this.playTime)},this),this.delaySec))},stop:function(){this.timerSrc&&(clearInterval(this.timerSrc),this.timerSrc=null)},createNav:function(){if(!this.sliderNav){for(var a='<div class="cui-navContainer" style="color: rgb(20, 145, 197); position: absolute;">',b=0;b<this.itemNum;b++)a+='<span class="cui-slide-nav-item" data-index="'+b+'"></span>';a+="</div>",this.sliderNav=$(a),this.$el.append(this.sliderNav),this._setNavPos(),this.setzIndexTop(this.sliderNav),this._setNavIndex(this.datamodel.index)}},_setNavPos:function(){var a=(parseInt(this.wrapper.width())-20*this.itemNum)/2;this.sliderNav.css({left:a,bottom:"10px"})},_addTouchEvent:function(){var a=this;this._removeTouchEvent(),this.$el.on("touchstart.imageslidertouchmove"+this.id,function(){a.stop()}),this.$el.on("touchmove.imageslidertouchmove"+this.id,function(){a.stop()}),this.$el.on("touchend.imageslidertouchmove"+this.id,function(){a.play()})},_removeTouchEvent:function(){this.$el.off(".imageslidertouchmove"+this.id)},_setNavIndex:function(a){this.$(".cui-navContainer").find("span").removeClass("cui-slide-nav-item-current"),this.$(".cui-navContainer").find('span[data-index="'+a+'"]').addClass("cui-slide-nav-item-current")},changedAction:function(){this._setNavIndex(this.datamodel.index)},addEvent:function($super){$super(),this.on("onRefresh",function(){this.sliderNav=null}),this.on("onShow",function(){this.createNav(),this.play(),this._addTouchEvent()}),this.on("onHide",function(){this.stop(),this._removeTouchEvent()})}})});