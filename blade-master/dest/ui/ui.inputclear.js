define(["UIView",getAppUITemplatePath("ui.inputclear"),"UIInputClear"],function(a,b){return _.inherit(a,{propertys:function($super){$super(),this.template=b,this.datamodel={parent:"body",container:"",offset:{},clearClass:".clear-input",clearEventClass:".close-me"},clearCallback=function(){}},getInputVal:function(a){return a},setPosition:function(a){var b=this.datamodel.offset;b.left&&a.css({left:b.left+"px",right:"auto"}),b.top&&a.css({top:b.top+"px",bottom:"auto"}),b.right&&a.css({right:b.right+"px",left:"auto"}),b.bottom&&a.css({bottom:b.bottom+"px",top:"auto"})},initialize:function($super,a){$super(a)},initElement:function(){},addEvent:function($super){$super();var a=this.datamodel.clearClass,b=".clear-input";this.on("onCreate",function(){var c=$(this.datamodel.parent).find(this.datamodel.container),d=this;c.each(function(){var c=$(this),e=d.$(b).clone();d.setPosition(e),c.after(e),a!=b&&e.addClass(a.replace(".",""))});var e=this.datamodel.container;$(d.datamodel.parent).on("input",e,function(b){var c=$(b.currentTarget);""==c.val()?c.next(a).hide():(c.next(a).show(),d.getInputVal(c.val()))}).on("focus",e,function(c){var e=$(c.currentTarget);if(!e.next(b).length){var f=d.$(b).clone();a!=b&&f.addClass(a.replace(".","")).removeClass("close-me"),d.setPosition(f),e.after(f)}""!=e.val()&&(e.next(b).show(),d.getInputVal(e.val()))}).on("focusout",e,function(a){var c=$(a.currentTarget);setTimeout(function(){c.next(b).hide()},500)}),d.datamodel.parent&&(".clear-input"!=d.datamodel.clearClass&&($(d.datamodel.clearClass).removeClass("close-me"),d.datamodel.clearEventClass=d.datamodel.clearClass),$(d.datamodel.parent).on("click",d.datamodel.clearEventClass,function(a){var b=$(a.currentTarget);d.getInputVal(b.prev("input").val()),b.prev("input").val(""),b.hide(),"function"==typeof d.clearCallback&&d.clearCallback.call(b)}))})}})});