define(["UILayer",getAppUITemplatePath("ui.scroll.layer"),"UIScroll"],function(a,b,c){return _.inherit(a,{propertys:function($super){$super(),this.template=b,this.datamodel={title:"scrollLayer",btns:[{name:"cancel",className:"cui-btns-cancel"},{name:"ok",className:"cui-btns-ok"}]},this.events={"click .cui-btns-ok":"okAction","click .cui-btns-cancel":"cancelAction","click .cui-top-close":"closeAction"},this.html=null,this.html="",this.maxHeight=300,this.sheight=0},okAction:function(){0},cancelAction:function(){0},closeAction:function(){this.hide()},initElement:function(){this.swrapper=this.$(".cui-bd"),s=""},initSize:function(){this.html&&(this.html=$(this.html),this.html.length>1&&(this.html=$("<div></div>").append(this.html)),this.html.css({"background-color":"white",width:"100%",position:"absolute"}),this.swrapper.append(this.html),this.initWrapperHeight())},initWrapperHeight:function(){var a=0;this.sheight=this.html.height(),a=Math.min(this.sheight,this.maxHeight),this.swrapper.height(a)},refreshHeight:function(){this.initWrapperHeight(),this.scroll&&this.scroll.refresh&&this.scroll.refresh(),this._initScroll()},initialize:function($super,a){$super(a)},_initScroll:function(){this.scroll&&this.scroll.destory&&this.scroll.destory(),this.sheight>=this.maxHeight&&(this.scroll=new c({wrapper:this.swrapper,scroller:this.html}))},addEvent:function($super){$super(),this.on("onShow",function(){this.initSize(),this._initScroll()},1),this.on("onHide",function(){this.scroll&&(this.scroll.destroy(),this.scroll=null)})}})});