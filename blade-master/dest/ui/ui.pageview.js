define(["UIView",getAppUITemplatePath("ui.pageview")],function(a,b){return _.inherit(a,{propertys:function($super){$super(),this.template=b,this.noTouchMove=!1,this.datamodel={title:"title"},this.events={"click .returnico":"backAction"},this.type="pageview",this.animateSwitch="top",this.inlineInstance=null},backAction:function(){this.animateSwitch?this.animateHide():this.hide()},initialize:function($super,a){$super(a)},initElement:function(){this.pageViewContent=this.$("article")},createRoot:function(a){this.$el=$(a).hide().attr("id",this.id)},_addTouchEvent:function(){this.noTouchMove&&this.$el.on("touchmove.pageviewtouchmove"+this.id,function(a){a.preventDefault()})},_removeTouchEvent:function(){this.noTouchMove&&this.$el.off(".pageviewtouchmove"+this.id)},_addPushStateEvent:function(){$(window).on("popstate.pageviewpopstate"+this.id,$.proxy(function(){this.hide()},this))},_removePushStateEvent:function(){this.$el.off(".pageviewpopstate"+this.id)},animateHandler:function(){var a;if(this.animateSwitch)switch(this.animateSwitch){case"top":a="translate(0, 100%)";break;case"bottom":a="translate(0, -100%)";break;case"left":a="translate(-100%, 0)";break;case"right":a="translate(100%, 0)";break;default:a="translate(100%, 0)"}return a},animateShow:function(a){a&&!this.inlineInstance&&(this.inlineInstance=a),this.show(function(a){var b=this.animateHandler();a.css({"-webkit-transform":b,transform:b}),a.show(),a.animate({"-webkit-transform":"translate(0, 0)",transform:"translate(0, 0)"},400,"ease-in-out",function(){$(".main").hide()})})},animateHide:function(){this.hide(function(a){var b=this.animateHandler();a.animate({"-webkit-transform":b,transform:b},400,"ease-in-out",function(){a.hide()})})},showInlineInstance:function(){this.inlineInstance&&(this.inlineInstance.wrapper=this.pageViewContent,this.inlineInstance.show())},hideInlineInstance:function(){this.inlineInstance&&this.inlineInstance.hide()},_setSize:function(){this.$el.css({"min-width":Math.max(document.documentElement.scrollWidth,document.body.scrollWidth)+"px","min-height":Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)+"px"})},_reSize:function(){this.$el.css({"min-width":$(window).width()+"px","min-height":$(window).height()+"px"})},addEvent:function(){this.on("onPreShow",function(){this._setSize()}),this.on("onShow",function(){this.setzIndexTop(),this._addTouchEvent(),this.showInlineInstance(),this._reSize()}),this.on("onHide",function(){this._removeTouchEvent(),this.hideInlineInstance(),$(".main").show()})}})});