define(["UIView",getAppUITemplatePath("ui.tab")],function(a,b){return _.inherit(a,{propertys:function($super){$super(),this.template=b,this.datamodel={data:[],curClass:"cui-tab-current",index:0},this.events={"click .cui-tab-mod>li":"clickAction"},this.onChange=function(){0}},resetPropery:function(){if((this.datamodel.index<0||this.datamodel.index>this.datamodel.data.length)&&(this.datamodel.index=0),!this.datamodel.selectedKey)return void(this.datamodel.selectedKey=this.datamodel.data[this.datamodel.index].id);for(var a=0,b=this.datamodel.data.length;b>a;a++)if(this.datamodel.selectedKey==this.datamodel.data[a].id){this.datamodel.index=a;break}},initElement:function(){this.el=this.$(".cui-tab-current"),this.tab=this.$(".cui-tab-scrollbar"),this.tabs=this.$("li")},clickAction:function(a){{var b=$(a.currentTarget),c=b.attr("data-index");this.datamodel.data[c]}this.datamodel.selectedKey=c,this.setIndex(c)},setVal:function(a){this.el=this.$('li[data-key="'+a+'"]');var b=this.el.attr("data-index"),c=this.datamodel.data[b];if(!c)return void 0;var d=this.datamodel.selectedKey==a;if(this.datamodel.selectedKey=a,this.tabs.removeClass(this.datamodel.curClass),this.el&&this.el.addClass(this.datamodel.curClass),navigator.userAgent.toLowerCase().indexOf("android")>-1){var e=this._tab.css("width");setTimeout($.proxy(function(){this._tab.css("width",e)},this),0)}0==d&&"function"==typeof this.onChange&&this.onChange.call(this,c)},getVal:function(){return this.datamodel.selectedKey},setIndex:function(a){0>a||a>this.datamodel.data.length-1||this.setVal(this.datamodel.data[a].id)},getIndex:function(){for(var a=0,b=this.datamodel.data.length;b>a;a++)if(this.getVal()==this.datamodel.data[a].id)return a;return-1},initialize:function($super,a){$super(a)},addEvent:function($super){$super()}})});