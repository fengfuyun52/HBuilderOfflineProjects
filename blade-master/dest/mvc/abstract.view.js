window.onunload=function(){},define([],function(){var a=_.inherit({propertys:function(){this.scrollPos={x:0,y:0}},createDom:function(a){this.viewname=a,this.id=_.uniqueId("view_"),this.$el=$('<div class="sub-viewport" page-id="'+a+'" id="'+this.id+'"></div>'),this.$el.hide(),this.app.viewport.append(this.$el)},initInterface:function(){var a,b,c="";for(a=0,b=this.app.interface.length;b>a;a++)c=this.app.interface[a],this[c]=$.proxy(this.app[c],this.app)},initialize:function(a,b){this.propertys(),this.app=a,this.createDom(b),this.initInterface(),this.onCreate()},turning:function(){},onCreate:function(){},onPreShow:function(){},onShow:function(){},load:function(){this.app.viewport.find("#"+this.id)[0]||this.app.viewport.append(this.$el),this.onPreShow()},show:function(){document.activeElement&&document.activeElement.blur(),window.scrollTo(0,0),this.$el.show(),this.onShow(),this.restoreScrollPos(),this.bindEvents()},hide:function(){this.$el.hide(),this.onHide(),this.unBindEvents()},refresh:function(){this.load()},destroy:function(){this.unBindEvents(),this.$el.remove(),delete this},$:function(a){return this.$el.find(a)},setScrollPos:function(a,b){this.scrollPos={x:a,y:b}},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},bindEvents:function(){var a=this.events;if(!a&&!(a=_.result(this,"events")))return this;this.unBindEvents();var b,c,d,e,f,g=/^(\S+)\s*(.*)$/;for(b in a)c=a[b],_.isFunction(c)||(c=this[a[b]]),c&&(d=b.match(g),e=d[1],f=d[2],c=_.bind(c,this),e+=".delegateEvents"+this.id,""===f?this.$el.on(e,c):this.$el.on(e,f,c));return this},unBindEvents:function(){return this.$el.off(".delegateEvents"+this.id),this}});return a});